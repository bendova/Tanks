<behaviortree version="1.1" repeatuntil="" name="PatrolAggressive" debugbreak="False"><sequencer usepriorities="False" repeatuntil="" name="root" debugbreak="False"><expression returnvalue="success" repeatuntil="" priority="" name="moveSpeed = 6" expression="moveSpeed = 6" debugbreak="False" /><expression returnvalue="success" repeatuntil="" priority="" name="attackRange = 8" expression="attackRange = 8" debugbreak="False" /><parallel tiebreaker="fail" succeed="all" repeatuntil="" priority="" name="parallel" fail="any" debugbreak="False"><sequencer usepriorities="False" repeatuntil="running" name="Look out for player" debugbreak="False"><selector usepriorities="False" repeatuntil="success" priority="" name="look for player" debugbreak="False"><detect sensor="&quot;LongRangeSensor&quot;" repeatuntil="" priority="" name="detect long range" matchtype="best" entityobjectvariable="" debugbreak="False" consistent="True" aspectvariable="" aspectobjectvariable="playerSighting" aspect="&quot;Player&quot;" /><detect sensor="&quot;CloseRangeSensor&quot;" repeatuntil="" priority="" name="detect close range" matchtype="best" entityobjectvariable="" debugbreak="False" consistent="True" aspectvariable="" aspectobjectvariable="playerSighting" aspect="&quot;Player&quot;" /></selector><expression returnvalue="success" repeatuntil="" priority="" name="player = playerSighting" expression="player = playerSighting" debugbreak="False" /><expression returnvalue="success" repeatuntil="" priority="" name="playerPos = position(playerSighting)" expression="playerPos = position(playerSighting)" debugbreak="False" /></sequencer><constraint repeatuntil="running" name="player != null. Attack player if in range" debugbreak="False" constraint="player != null"><selector usepriorities="False" repeatuntil="" name="selector" debugbreak="False"><sequencer usepriorities="False" repeatuntil="" priority="" name="attack" debugbreak="False"><detect sensor="&quot;AttackRangeSensor&quot;" repeatuntil="" priority="" name="detect if in attack range" matchtype="best" entityobjectvariable="" debugbreak="False" consistent="True" aspectvariable="" aspectobjectvariable="" aspect="&quot;Player&quot;" /><expression returnvalue="success" repeatuntil="" priority="" name="isFiring = true" expression="isFiring = true" debugbreak="False" /><action repeatuntil="" priority="" parametervalues="cGxheWVyUG9zAG1vdmVTcGVlZABhdHRhY2tSYW5nZQ==" parameters="VGFyZ2V0UG9zAE1vdmVTcGVlZABSYW5nZQ==" namespace="(global)" name="keep player in attack range" debugbreak="False" classname="KeepTargetInRange" /><action repeatuntil="" priority="" parametervalues="cGxheWVy" parameters="VGFyZ2V0" namespace="(global)" name="attack" debugbreak="False" classname="Attack" /></sequencer><expression returnvalue="success" repeatuntil="" priority="" name="isFiring = false" expression="isFiring = false" debugbreak="False" /></selector></constraint><constraint repeatuntil="running" name="player != null &amp;&amp; isFiring == false. Move to player" debugbreak="False" constraint="player != null &amp;&amp; isFiring == false"><parallel tiebreaker="fail" succeed="all" repeatuntil="" name="parallel" fail="all" debugbreak="False"><constraint repeatuntil="" name="playerSighting != null" debugbreak="False" constraint="playerSighting != null"><move turnspeed="" repeatuntil="" name="move to player" movetarget="playerPos" movespeed="moveSpeed" facetarget="playerPos" debugbreak="False" closeenoughdistance="closeEnoughDistance" closeenoughangle="" /></constraint><constraint repeatuntil="" name="playerSighting == null" debugbreak="False" constraint="playerSighting == null"><sequencer usepriorities="False" repeatuntil="" name="sequencer" debugbreak="False"><move turnspeed="" repeatuntil="" priority="" name="move to last known position" movetarget="playerPos" movespeed="moveSpeed" facetarget="" debugbreak="False" closeenoughdistance="" closeenoughangle="" /><timer waitforsec="5" returnvalue="success" priority="" name="wait 5 seconds" debugbreak="False" /><expression returnvalue="success" repeatuntil="" priority="" name="player = null. Forget about the player" expression="player = null" debugbreak="False" /></sequencer></constraint></parallel></constraint><constraint repeatuntil="running" name="player == null. Look for ammo" debugbreak="False" constraint="player == null"><sequencer usepriorities="False" repeatuntil="" name="detect ammo" debugbreak="False"><detect sensor="&quot;VisualSensor&quot;" repeatuntil="" priority="" name="detect ammo" matchtype="best" entityobjectvariable="" debugbreak="False" consistent="True" aspectvariable="" aspectobjectvariable="ammo" aspect="&quot;Ammo&quot;" /><move turnspeed="" repeatuntil="" priority="" name="move to ammo" movetarget="ammo" movespeed="moveSpeed" facetarget="" debugbreak="False" closeenoughdistance="" closeenoughangle="" /><expression returnvalue="evaluate" repeatuntil="" priority="" name="ammo = null" expression="ammo = null" debugbreak="False" /></sequencer></constraint><constraint repeatuntil="running" name="player == null &amp;&amp; ammo == null. Patrol" debugbreak="False" constraint="player == null &amp;&amp; ammo == null"><waypointpatrol waypointsetvariable="PatrolPath" waypointactiontype="patrol" traversetype="loop" traverseorder="forward" repeatuntil="" pathtargetvariable="" name="waypointpatrol" movetargetvariable="waypoint" debugbreak="False"><move turnspeed="" repeatuntil="" name="move to waypoint" movetarget="waypoint" movespeed="moveSpeed" facetarget="" debugbreak="False" closeenoughdistance="0" closeenoughangle="" /></waypointpatrol></constraint></parallel></sequencer></behaviortree>